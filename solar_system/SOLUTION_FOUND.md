# ‚úÖ –†–ï–®–ï–ù–ò–ï –ù–ê–ô–î–ï–ù–û!

## –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞

**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ —Å–ª–µ–¥–æ–≤–∞–ª–∞ –∑–∞ —Å–æ–ª–Ω—Ü–µ–º - –≥–æ—Ä—è—á–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≤—Ä–∞—â–∞–ª–∞—Å—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–æ–ª–Ω—Ü–µ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–±—ä–µ–∫—Ç–∞.

## –†–∞–±–æ—á–∏–π –∫–æ–¥ (–∏–∑ debug_temperature.html)

```javascript
// 1. –í—ã—á–∏—Å–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –ú–µ—Ä–∫—É—Ä–∏—è –∫ –°–æ–ª–Ω—Ü—É –≤ –º–∏—Ä–æ–≤—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
const sunPos = new THREE.Vector3(0, 0, 0);
const mercuryPos = mercury.position.clone();
const toSun = sunPos.sub(mercuryPos).normalize();

// 2. –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –ú–µ—Ä–∫—É—Ä–∏—è
mercury.updateMatrixWorld();
const mercuryMatrixInverse = new THREE.Matrix4()
  .copy(mercury.matrixWorld)
  .invert();
const sunDirLocal = toSun.clone()
  .applyMatrix4(mercuryMatrixInverse)
  .normalize();

// 3. –ü–µ—Ä–µ–¥–∞—ë–º –≤ —à–µ–π–¥–µ—Ä –õ–û–ö–ê–õ–¨–ù–û–ï –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
material.uniforms.sunDirection.value.copy(sunDirLocal);
```

## –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤

–í —à–µ–π–¥–µ—Ä–µ:
- **–ù–æ—Ä–º–∞–ª–∏ (`normal`)** –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ **object space** (–ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–±—ä–µ–∫—Ç–∞)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–æ–ª–Ω—Ü–µ** –º—ã –≤—ã—á–∏—Å–ª—è–ª–∏ –≤ **world space** (–º–∏—Ä–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ `dot product` –æ–±–∞ –≤–µ–∫—Ç–æ—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ!

### –†–µ—à–µ–Ω–∏–µ

1. **`updateMatrixWorld()`** - –æ–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ç—Ä–∏—Ü—É –º–∏—Ä–∞ –æ–±—ä–µ–∫—Ç–∞
2. **`matrixWorld.invert()`** - –ø–æ–ª—É—á–∞–µ–º –æ–±—Ä–∞—Ç–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É (world ‚Üí local)
3. **`applyMatrix4()`** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ world –≤ local space
4. **`normalize()`** - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã Three.js

### –ú–∞—Ç—Ä–∏—Ü—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π
- `matrixWorld` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑ local –≤ world space
- `matrixWorldInverse` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏–∑ world –≤ local space
- **–í–∞–∂–Ω–æ:** –≤—ã–∑—ã–≤–∞—Ç—å `updateMatrixWorld()` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º!

### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —à–µ–π–¥–µ—Ä–∞—Ö
- `position` - –≤–µ—Ä—à–∏–Ω—ã –≤ object space
- `normal` - –Ω–æ—Ä–º–∞–ª–∏ –≤ object space
- `modelMatrix` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç object ‚Üí world
- `viewMatrix` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç world ‚Üí view (–∫–∞–º–µ—Ä–∞)
- `projectionMatrix` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç view ‚Üí clip

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

‚úÖ **–†–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- `debug_temperature.html` - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è
- `visualize_normals.html` - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- `src/main.js` - –æ–±–Ω–æ–≤–ª—ë–Ω —Å —Ä–∞–±–æ—á–∏–º —Ä–µ—à–µ–Ω–∏–µ–º
- `src/main_simple.js` - –æ–±–Ω–æ–≤–ª—ë–Ω —Å —Ä–∞–±–æ—á–∏–º —Ä–µ—à–µ–Ω–∏–µ–º

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫
```bash
cd solar_system
python run_server.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080/
2. –£–±–µ–¥–∏—Ç–µ—Å—å:
   - üî¥ –ö—Ä–∞—Å–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –í–°–ï–ì–î–ê –∫ —Å–æ–ª–Ω—Ü—É
   - üîµ –°–∏–Ω—è—è —Å—Ç–æ—Ä–æ–Ω–∞ –í–°–ï–ì–î–ê –æ—Ç —Å–æ–ª–Ω—Ü–∞
   - ‚Üª –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –æ—Ä–±–∏—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Å–æ–ª–Ω—Ü–µ–º

## –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

–ö–ª—é—á –∫ —Ä–µ—à–µ–Ω–∏—é:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (world ‚Üí local)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `updateMatrixWorld()` –∏ –æ–±—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π

–¢–µ–ø–µ—Ä—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∫–∞—Ä—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–æ–ª–Ω—Ü–∞ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π –æ—Ä–±–∏—Ç—ã –ú–µ—Ä–∫—É—Ä–∏—è.

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–° —Ä–µ—à—ë–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É:
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω–µ—Ç—ã
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ä–±–∏—Ç—ã
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤—Ä–∞—â–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç –∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å—ã
4. ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ/–≤–∏–¥–∏–º–æ–µ)
5. ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ —Å–æ–ª–Ω—Ü–∞ –ø–æ –≥–∞–ª–∞–∫—Ç–∏–∫–µ

–§—É–Ω–¥–∞–º–µ–Ω—Ç –∑–∞–ª–æ–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ!