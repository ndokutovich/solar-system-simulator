<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solar System Simulation - Physics Engine</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div id="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã...</div>

  <div id="canvas-container"></div>

  <!-- Main Controls Panel -->
  <div id="controls" class="panel">
    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º</h3>

    <div class="control-group">
      <label>–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speed-value">1x</span></label>
      <input type="range" id="time-speed" min="0" max="10000" step="10" value="1">

      <div class="button-group">
        <button id="pause-btn">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
        <button id="reset-btn">üîÑ –°–±—Ä–æ—Å</button>
        <button id="reverse-btn">‚èÆÔ∏è –†–µ–≤–µ—Ä—Å</button>
      </div>
    </div>

    <h3>–ú–∞—Å—à—Ç–∞–±</h3>
    <div class="control-group">
      <button id="scale-realistic" class="scale-btn">–†–µ–∞–ª—å–Ω—ã–π</button>
      <button id="scale-visible" class="scale-btn active">–í–∏–¥–∏–º—ã–π</button>
      <button id="scale-transition" class="scale-btn">–ü–µ—Ä–µ—Ö–æ–¥</button>
    </div>

    <h3>–ö–∞–º–µ—Ä–∞</h3>
    <div class="control-group">
      <button id="view-solar-system">‚òÄÔ∏è –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</button>
      <button id="view-inner">üåç –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã</button>
      <button id="view-outer">ü™ê –í–Ω–µ—à–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã</button>
      <button id="view-earth-moon">üåô –ó–µ–º–ª—è-–õ—É–Ω–∞</button>
      <button id="view-jupiter">‚ôÉ –°–∏—Å—Ç–µ–º–∞ –Æ–ø–∏—Ç–µ—Ä–∞</button>
      <button id="view-saturn">‚ôÑ –°–∏—Å—Ç–µ–º–∞ –°–∞—Ç—É—Ä–Ω–∞</button>
    </div>

    <h3>–°–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –æ–±—ä–µ–∫—Ç–æ–º</h3>
    <div class="control-group">
      <select id="follow-body">
        <option value="">–ù–µ —Å–ª–µ–¥–æ–≤–∞—Ç—å</option>
        <optgroup label="–°–æ–ª–Ω—Ü–µ">
          <option value="sun">‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ</option>
        </optgroup>
        <optgroup label="–ü–ª–∞–Ω–µ—Ç—ã">
          <option value="mercury">‚òø –ú–µ—Ä–∫—É—Ä–∏–π</option>
          <option value="venus">‚ôÄ –í–µ–Ω–µ—Ä–∞</option>
          <option value="earth">üåç –ó–µ–º–ª—è</option>
          <option value="mars">‚ôÇ –ú–∞—Ä—Å</option>
          <option value="jupiter">‚ôÉ –Æ–ø–∏—Ç–µ—Ä</option>
          <option value="saturn">‚ôÑ –°–∞—Ç—É—Ä–Ω</option>
          <option value="uranus">‚ôÖ –£—Ä–∞–Ω</option>
          <option value="neptune">‚ôÜ –ù–µ–ø—Ç—É–Ω</option>
        </optgroup>
        <optgroup label="–ö–∞—Ä–ª–∏–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã">
          <option value="pluto">‚ôá –ü–ª—É—Ç–æ–Ω</option>
        </optgroup>
        <optgroup label="–°–ø—É—Ç–Ω–∏–∫–∏">
          <option value="moon">üåô –õ—É–Ω–∞</option>
          <option value="phobos">–§–æ–±–æ—Å</option>
          <option value="deimos">–î–µ–π–º–æ—Å</option>
          <option value="io">–ò–æ</option>
          <option value="europa">–ï–≤—Ä–æ–ø–∞</option>
          <option value="ganymede">–ì–∞–Ω–∏–º–µ–¥</option>
          <option value="callisto">–ö–∞–ª–ª–∏—Å—Ç–æ</option>
          <option value="titan">–¢–∏—Ç–∞–Ω</option>
          <option value="triton">–¢—Ä–∏—Ç–æ–Ω</option>
        </optgroup>
      </select>
    </div>

    <h3>–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h3>
    <div class="checkbox-group">
      <label><input type="checkbox" id="show-orbits" checked> –û—Ä–±–∏—Ç—ã</label>
      <label><input type="checkbox" id="show-labels" checked> –ü–æ–¥–ø–∏—Å–∏</label>
      <label><input type="checkbox" id="show-grid" checked> –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞</label>
      <label><input type="checkbox" id="show-axes"> –û—Å–∏</label>
      <label><input type="checkbox" id="show-temperature" checked> –ö–∞—Ä—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä</label>
      <label><input type="checkbox" id="show-terminators"> –¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä—ã</label>
      <label><input type="checkbox" id="show-sun-rays"> –õ—É—á–∏ —Å–æ–ª–Ω—Ü–∞</label>
      <label><input type="checkbox" id="show-galaxy-motion"> –î–≤–∏–∂–µ–Ω–∏–µ –≥–∞–ª–∞–∫—Ç–∏–∫–∏</label>
      <label><input type="checkbox" id="show-trails"> –°–ª–µ–¥—ã –æ—Ä–±–∏—Ç</label>
      <label><input type="checkbox" id="show-reflected"> –û—Ç—Ä–∞–∂—ë–Ω–Ω—ã–π —Å–≤–µ—Ç</label>
    </div>
  </div>

  <!-- Information Panel -->
  <div id="info-panel" class="panel">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

    <div class="info-group">
      <h4>–í—Ä–µ–º—è —Å–∏–º—É–ª—è—Ü–∏–∏</h4>
      <div>–î–∞—Ç–∞: <span id="sim-date">-</span></div>
      <div>–î–µ–Ω—å –≥–æ–¥–∞: <span id="sim-day">-</span></div>
      <div>–°–æ–ª–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è: <span id="solar-time">-</span></div>
    </div>

    <div class="info-group">
      <h4>–í—ã–±—Ä–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç</h4>
      <div>–ù–∞–∑–≤–∞–Ω–∏–µ: <span id="selected-name">-</span></div>
      <div>–¢–∏–ø: <span id="selected-type">-</span></div>
      <div>–†–æ–¥–∏—Ç–µ–ª—å: <span id="selected-parent">-</span></div>
      <div>–†–∞–¥–∏—É—Å: <span id="selected-radius">-</span> –∫–º</div>
      <div>–û—Ä–±–∏—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥: <span id="selected-orbital">-</span></div>
      <div>–ü–µ—Ä–∏–æ–¥ –≤—Ä–∞—â–µ–Ω–∏—è: <span id="selected-rotation">-</span></div>
      <div>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è: <span id="selected-distance">-</span></div>
    </div>

    <div class="info-group">
      <h4>–¢–æ—á–∫–∞ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏</h4>
      <div>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: <span id="surface-coords">-</span></div>
      <div>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: <span id="surface-temp">-</span></div>
      <div>–£–≥–æ–ª —Å–æ–ª–Ω—Ü–∞: <span id="sun-angle">-</span></div>
      <div>–û—Å–≤–µ—â—ë–Ω–Ω–æ—Å—Ç—å: <span id="illumination">-</span></div>
    </div>

    <div class="info-group">
      <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
      <div>FPS: <span id="fps">-</span></div>
      <div>–û–±—ä–µ–∫—Ç–æ–≤: <span id="object-count">-</span></div>
      <div>–ü–æ–ª–∏–≥–æ–Ω–æ–≤: <span id="polygon-count">-</span></div>
    </div>
  </div>

  <!-- Planet Details Popup -->
  <div id="planet-details" class="popup hidden">
    <button class="close-btn">√ó</button>
    <h2 id="detail-name">-</h2>
    <div class="detail-content">
      <div class="detail-row">
        <span class="label">–î–∏–∞–º–µ—Ç—Ä:</span>
        <span id="detail-diameter">-</span>
      </div>
      <div class="detail-row">
        <span class="label">–ú–∞—Å—Å–∞:</span>
        <span id="detail-mass">-</span>
      </div>
      <div class="detail-row">
        <span class="label">–û—Ä–±–∏—Ç–∞:</span>
        <span id="detail-orbit">-</span>
      </div>
      <div class="detail-row">
        <span class="label">–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞:</span>
        <span id="detail-atmosphere">-</span>
      </div>
      <div class="detail-row">
        <span class="label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</span>
        <span id="detail-temperature">-</span>
      </div>
      <div class="detail-row">
        <span class="label">–°–ø—É—Ç–Ω–∏–∫–∏:</span>
        <span id="detail-moons">-</span>
      </div>
    </div>
  </div>

  <!-- Load Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

  <!-- Load application -->
  <!-- Choose which version to load -->
  <script type="module">
    // Check URL parameter for version selection
    const params = new URLSearchParams(window.location.search);
    const version = params.get('version') || 'main';

    let scriptPath = './src/main.js'; // default with relative path

    switch(version) {
      case 'simple':
        scriptPath = './src/main_simple.js';
        console.log('Loading SIMPLE version for debugging');
        break;
      case 'debug':
        window.location.href = 'debug_temperature.html';
        break;
      default:
        console.log('Loading main version');
    }

    // Dynamically load the selected script
    import(scriptPath).then((module) => {
      console.log(`‚úÖ Loaded ${scriptPath}`);
      // Create and initialize the app directly
      const MinimalSolarSystem = module.default;
      const app = new MinimalSolarSystem();
      app.initialize();
      window.solarSystemApp = app;
    }).catch(err => {
      console.error(`‚ùå Failed to load ${scriptPath}:`, err);
      document.getElementById('loading').innerHTML = `<span style="color: red">Error: ${err.message}</span>`;
    });
  </script>
  <!-- <script type="module" src="src/main.js"></script> -->
</body>
</html>